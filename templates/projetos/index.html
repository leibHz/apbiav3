{% extends "base.html" %}

{% block title %}Meus Projetos - APBIA{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/projetos.css') }}">
{% endblock %}

{% block content %}
<div class="projetos-container">
    <div class="projetos-header">
        <div class="projetos-title">
            <h2><i class="fas fa-flask"></i> Meus Projetos</h2>
            <p>Gerencie seus projetos para a Bragantec</p>
        </div>
        <a href="{{ url_for('project.novo') }}" class="btn-novo-projeto">
            <i class="fas fa-plus"></i> Novo Projeto
        </a>
    </div>
    
    {% if projetos %}
    <div class="projetos-grid">
        {% for projeto in projetos %}
        <div class="projeto-card">
            <div class="projeto-card-body">
                <div class="projeto-badges">
                    <span class="badge badge-{{ 'primary' if projeto.categoria == 'Informática' else 'success' if projeto.categoria == 'Engenharias' else 'info' if projeto.categoria == 'Ciências da Natureza e Exatas' else 'warning' }}">
                        {{ projeto.categoria }}
                    </span>
                    <span class="badge badge-{{ 'secondary' if projeto.status == 'rascunho' else 'primary' if projeto.status == 'em_andamento' else 'success' }}">
                        {{ projeto.status|replace('_', ' ')|title }}
                    </span>
                </div>
                
                <h5 class="projeto-titulo">{{ projeto.nome }}</h5>
                
                {% if projeto.resumo %}
                <p class="projeto-resumo">
                    {{ projeto.resumo[:150] }}{% if projeto.resumo|length > 150 %}...{% endif %}
                </p>
                {% endif %}
                
                {% if projeto.gerado_por_ia %}
                <div style="margin-bottom: 1rem;">
                    <span class="badge badge-info badge-ia">
                        <i class="fas fa-robot"></i> Gerado por IA
                    </span>
                </div>
                {% endif %}
                
                <div class="projeto-footer">
                    <small class="projeto-data">
                        <i class="far fa-calendar"></i> 
                        {{ projeto.data_criacao.strftime('%d/%m/%Y') if projeto.data_criacao else '' }}
                    </small>
                    <div class="projeto-acoes">
                        <a href="{{ url_for('project.editar', projeto_id=projeto.id) }}" 
                           class="btn-acao btn-editar"
                           title="Editar projeto">
                            <i class="fas fa-edit"></i>
                        </a>
                        <button class="btn-acao btn-pdf gerar-pdf" 
                                data-projeto-id="{{ projeto.id }}"
                                title="Gerar PDF">
                            <i class="fas fa-file-pdf"></i>
                        </button>
                        <button class="btn-acao btn-deletar deletar-projeto" 
                                data-projeto-id="{{ projeto.id }}"
                                title="Deletar projeto">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="projetos-empty">
        <i class="fas fa-flask"></i>
        <h4>Nenhum projeto ainda</h4>
        <p>Comece criando seu primeiro projeto para a Bragantec!</p>
        <a href="{{ url_for('project.novo') }}" class="btn-primeiro-projeto">
            <i class="fas fa-plus"></i> Criar Primeiro Projeto
        </a>
    </div>
    {% endif %}
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/projetos_index.js') }}"></script>
{% endblock %}